{"version":3,"file":"static/js/947.5e2e976b.chunk.js","mappings":"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","sources":["components/PsyList/PsyList.jsx","pages/PsychologistsPage/PsychologistsPage.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n// import { useSelector } from 'react-redux';\nimport { nanoid } from 'nanoid';\nimport PsyCard from 'components/PsyCard';\nimport { PsyListWrapper, LoadMoreWrapper } from './PsyList.styled.js';\n\nimport { db } from '../../firebase.js';\nimport { ref, onValue } from 'firebase/database';\nimport Button from 'components/Button/index.js';\n\nconst PsyList = () => {\n  const [psychologists, setPsychologists] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const psyPerPage = 3;\n\n  // const [clickedPsyId, setClickedPsyId] = useState(null);\n  const [favoritesPsy, setFavoritePsy] = useState([]);\n\n  useEffect(() => {\n    const favoritesRef = ref(db, 'favorites');\n    const query = onValue(favoritesRef, snapshot => {\n      const data = snapshot.val();\n      if (data) {\n        const favoritesArray = Object.values(data);\n        setFavoritePsy(favoritesArray);\n      }\n    });\n\n    return () => {\n      query();\n    };\n  }, []);\n\n  const isFavoritePsy = psyId => {\n    return favoritesPsy.find(psy => psy.id === psyId);\n  };\n\n  const addToFavorites = psychologist => {\n    return [...favoritesPsy, psychologist];\n  };\n\n  const deleteFromFavorites = psyId => {\n    const index = favoritesPsy.findIndex(\n      favoritePsy => favoritePsy.id === favoritePsy.psyId\n    );\n    const updatedFavortes = favoritesPsy.splice(index, 1);\n    setFavoritePsy(updatedFavortes);\n  };\n\n  const toggleIcon = psyId => {\n    const foundFavPsy = psychologists.find(psy => psy.id === psyId);\n\n    if (foundFavPsy) {\n      deleteFromFavorites(foundFavPsy.id);\n    } else {\n      const chosenFavPsy = favoritesPsy.find(psy => psy.id === psyId);\n      addToFavorites(chosenFavPsy);\n    }\n  };\n\n  const onHeartClick = psyId => {\n    // setClickedPsyId(psyId);\n    toggleIcon(psyId);\n    isFavoritePsy(psyId);\n  };\n\n  const onLoadMore = () => {\n    setCurrentPage(currentPage + 1);\n  };\n\n  useEffect(() => {\n    const psychologistsRef = ref(db, 'psycologists');\n\n    const startAt = (currentPage - 1) * psyPerPage;\n\n    const query = onValue(psychologistsRef, snapshot => {\n      const data = snapshot.val();\n\n      if (data) {\n        const psychologistsArray = Object.values(data)\n          .slice(startAt, startAt + psyPerPage)\n          .map(psychologist => ({\n            id: nanoid(),\n            ...psychologist,\n          }));\n        setPsychologists(prevPsychologists => [\n          ...prevPsychologists,\n          ...psychologistsArray,\n        ]);\n      }\n    });\n\n    return () => query();\n  }, [currentPage]);\n\n  return (\n    <>\n      <PsyListWrapper>\n        {psychologists.map(psychologist => (\n          <PsyCard\n            psychologist={psychologist}\n            key={psychologist.id}\n            onHeartClick={onHeartClick}\n            isFavoritePsy={isFavoritePsy}\n          />\n        ))}\n\n        <LoadMoreWrapper>\n          {psychologists.length < 3 ? (\n            ''\n          ) : (\n            <Button\n              type=\"button\"\n              fontSize={16}\n              padding=\"14px 48px\"\n              onClick={onLoadMore}\n            >\n              Load more\n            </Button>\n          )}\n        </LoadMoreWrapper>\n      </PsyListWrapper>\n    </>\n  );\n};\n\nexport default PsyList;\n","import Header from 'components/Header';\nimport Filters from 'components/Filters';\nimport PsyList from 'components/PsyList/PsyList';\nimport { ContainerStyled } from 'components/Container/Container.styled';\nimport { PsyPageWrapper } from './PsychologistsPage.styled';\n\nconst PsychologistsPage = () => {\n  return (\n    <PsyPageWrapper>\n      <Header />\n      <ContainerStyled>\n        <Filters />\n        <PsyList />\n      </ContainerStyled>\n    </PsyPageWrapper>\n  );\n};\n\nexport default PsychologistsPage;\n"],"names":["_useState","useState","_useState2","_slicedToArray","psychologists","setPsychologists","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","favoritesPsy","setFavoritePsy","useEffect","favoritesRef","ref","db","query","onValue","snapshot","data","val","favoritesArray","Object","values","isFavoritePsy","psyId","find","psy","id","toggleIcon","psychologist","foundFavPsy","index","findIndex","favoritePsy","updatedFavortes","splice","deleteFromFavorites","chosenFavPsy","concat","_toConsumableArray","onHeartClick","psychologistsRef","startAt","psychologistsArray","slice","map","_objectSpread","nanoid","prevPsychologists","_jsx","_Fragment","children","_jsxs","PsyListWrapper","PsyCard","LoadMoreWrapper","length","Button","type","fontSize","padding","onClick","PsyPageWrapper","Header","ContainerStyled","Filters","PsyList"],"sourceRoot":""}