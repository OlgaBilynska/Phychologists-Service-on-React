{"version":3,"file":"static/js/947.c4e55cc1.chunk.js","mappings":"8SA4JA,EAzIgB,WACd,IAAAA,GAA0CC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/CI,EAAaF,EAAA,GAAEG,EAAgBH,EAAA,GACtCI,GAAsCL,EAAAA,EAAAA,UAAS,GAAEM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA1CE,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GAqGlC,OA5CAG,EAAAA,EAAAA,YAAU,WACR,IAAMC,GAAmBC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,gBAsB3BC,EA/EW,GA+EAN,EAAc,GAGzBO,GAAQC,EAAAA,EAAAA,IAAQL,GAAkB,SAAAM,GACtC,IAAMC,EAAOD,EAASE,MAEtB,GAAID,EAAM,CACR,IAAME,EAAqBC,OAAOC,OAAOJ,GAAMK,MAC7CT,EACAA,EAxFW,GA0FbT,GAAiB,SAAAmB,GAAiB,SAAAC,QAAAC,EAAAA,EAAAA,GAC7BF,IAAiBE,EAAAA,EAAAA,GACjBN,GAAkB,GAEzB,CACF,IAEA,OAAO,kBAAML,GAAQ,CACvB,GAAG,CAACP,KAGFmB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACEC,EAAAA,EAAAA,MAACC,EAAAA,EAAc,CAAAF,SAAA,CACZzB,EAAc4B,KAAI,SAAAC,GAAY,OAC7BN,EAAAA,EAAAA,KAACO,EAAAA,EAAO,CAACD,aAAcA,IAAmBE,EAAAA,EAAAA,MAAY,KAGxDL,EAAAA,EAAAA,MAACM,EAAAA,EAAe,CAAAP,SAAA,CACbzB,EAAciC,OAAS,EACtB,IAEAV,EAAAA,EAAAA,KAACW,EAAAA,EAAM,CACLC,QAAS,WACUnC,EAAcA,EAAciC,OAAS,EAAK,EAC5DR,SACF,UAKHF,EAAAA,EAAAA,KAACW,EAAAA,EAAM,CACLE,KAAK,SACLC,SAAU,GACVC,QAAQ,YACRH,QAxES,WACjB9B,EAAeD,EAAc,EAC/B,EAsE8BqB,SACrB,qBAOX,E,oBCxIA,EAZ0B,WACxB,OACEC,EAAAA,EAAAA,MAACa,EAAAA,EAAc,CAAAd,SAAA,EACbF,EAAAA,EAAAA,KAACiB,EAAAA,EAAM,KACPd,EAAAA,EAAAA,MAACe,EAAAA,EAAe,CAAAhB,SAAA,EACdF,EAAAA,EAAAA,KAACmB,EAAAA,EAAO,KACRnB,EAAAA,EAAAA,KAACoB,EAAO,SAIhB,C","sources":["components/PsyList/PsyList.jsx","pages/PsychologistsPage/PsychologistsPage.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n// import { useSelector } from 'react-redux';\nimport { nanoid } from 'nanoid';\nimport PsyCard from 'components/PsyCard';\nimport { PsyListWrapper, LoadMoreWrapper } from './PsyList.styled.js';\n\nimport { db } from '../../firebase.js';\nimport { ref, onValue } from 'firebase/database';\nimport Button from 'components/Button/index.js';\n// import {\n// collection,\n// query,\n// orderBy,\n//   startAfter,\n//   limit,\n//   getDocs,\n// } from 'firebase/firestore';\n// import { selectPsychologists } from '../../redux/selectors.js';\n\nconst PsyList = () => {\n  const [psychologists, setPsychologists] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const psyPerPage = 3;\n\n  //start the example\n\n  // const [list, setList] = useState([]);\n  // const [page, setPage] = useState(1);\n\n  // useEffect(() => {\n  //   const fetchData = async () => {\n  //     await fireBaseConfig\n  //       .firestore()\n  //       .collection('psycologists')\n  //       // .orderBy('created', 'desc')\n  //       // .limit(4)\n  //       .onSnapshot(function (querySnapshot) {\n  //         var items = [];\n  //         querySnapshot.forEach(function (doc) {\n  //           items.push({ key: nanoid(), ...doc.data() });\n  //         });\n  //         console.log('first item ', items[0]);\n  //         setPsychologists(items);\n  //       });\n  //   };\n  //   fetchData();\n  // }, []);\n\n  const showNext = ({ item }) => {\n    // if (psychologists.length === 0) {\n    //   alert('Thats all we have for now !');\n    // } else {\n    //   const fetchNextData = async () => {\n    //     await fireBaseConfig\n    //       .firestore()\n    //       .collection('psycologists')\n    //       // .orderBy('created', 'desc')\n    //       .limit(5)\n    //       .startAfter(item.created)\n    //       .onSnapshot(function (querySnapshot) {\n    //         const items = [];\n    //         querySnapshot.forEach(function (doc) {\n    //           items.push({ key: nanoid(), ...doc.data() });\n    //         });\n    //         setPsychologists(items);\n    //         setCurrentPage(currentPage + 1);\n    //       });\n    //   };\n    //   fetchNextData();\n    // }\n  };\n\n  //finish\n\n  const onLoadMore = () => {\n    setCurrentPage(currentPage + 1);\n  };\n\n  useEffect(() => {\n    const psychologistsRef = ref(db, 'psycologists');\n\n    // const queryRef = query(psychologistsRef);\n    // console.log('q', queryRef);\n\n    // const myQuery = psychologistsRef.limit(4);\n\n    // const first = query(collection(db, 'psycologists'), limit(25));\n    // const documentSnapshots = async () => {\n    //   await getDocs(first);\n    // };\n\n    // const lastVisible =\n    //   documentSnapshots.docs[documentSnapshots.docs.length - 1];\n    // console.log('last', lastVisible);\n\n    // const next = query(\n    //   collection(db, 'psycologists'),\n    //   startAfter(lastVisible),\n    //   limit(25)\n    // );\n\n    const startAt = (currentPage - 1) * psyPerPage;\n    // const endAt = startAt + psyPerPage;\n\n    const query = onValue(psychologistsRef, snapshot => {\n      const data = snapshot.val();\n\n      if (data) {\n        const psychologistsArray = Object.values(data).slice(\n          startAt,\n          startAt + psyPerPage\n        );\n        setPsychologists(prevPsychologists => [\n          ...prevPsychologists,\n          ...psychologistsArray,\n        ]);\n      }\n    });\n\n    return () => query();\n  }, [currentPage]);\n\n  return (\n    <>\n      <PsyListWrapper>\n        {psychologists.map(psychologist => (\n          <PsyCard psychologist={psychologist} key={nanoid()} />\n        ))}\n\n        <LoadMoreWrapper>\n          {psychologists.length < 3 ? (\n            ''\n          ) : (\n            <Button\n              onClick={() =>\n                showNext({ item: psychologists[psychologists.length - 1] })\n              }\n            >\n              Next\n            </Button>\n          )}\n\n          <Button\n            type=\"button\"\n            fontSize={16}\n            padding=\"14px 48px\"\n            onClick={onLoadMore}\n          >\n            Load more\n          </Button>\n        </LoadMoreWrapper>\n      </PsyListWrapper>\n    </>\n  );\n};\n\nexport default PsyList;\n","import Header from 'components/Header';\nimport Filters from 'components/Filters';\nimport PsyList from 'components/PsyList/PsyList';\nimport { ContainerStyled } from 'components/Container/Container.styled';\nimport { PsyPageWrapper } from './PsychologistsPage.styled';\n\nconst PsychologistsPage = () => {\n  return (\n    <PsyPageWrapper>\n      <Header />\n      <ContainerStyled>\n        <Filters />\n        <PsyList />\n      </ContainerStyled>\n    </PsyPageWrapper>\n  );\n};\n\nexport default PsychologistsPage;\n"],"names":["_useState","useState","_useState2","_slicedToArray","psychologists","setPsychologists","_useState3","_useState4","currentPage","setCurrentPage","useEffect","psychologistsRef","ref","db","startAt","query","onValue","snapshot","data","val","psychologistsArray","Object","values","slice","prevPsychologists","concat","_toConsumableArray","_jsx","_Fragment","children","_jsxs","PsyListWrapper","map","psychologist","PsyCard","nanoid","LoadMoreWrapper","length","Button","onClick","type","fontSize","padding","PsyPageWrapper","Header","ContainerStyled","Filters","PsyList"],"sourceRoot":""}